import{_ as V,a as z,c as I,b as a,d as s,w as o,i as N,e as l,j as R,u as f,k as S,l as q,m as B,n as c,q as C,r as _,x as E,E as g}from"./main-BuGC26DR.js";const F={class:"login-container"},L={class:"login-card"},M={class:"login-header"},U={class:"login-footer"},$={__name:"Login",setup(h){const v=R(),d=_(!1),m=_(),t=C({username:"",password:""}),w={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:50,message:"用户名长度在3-50个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码长度在6-20个字符之间",trigger:"blur"}]},y=async()=>{m.value&&await m.value.validate(async p=>{if(p){d.value=!0;try{const e=await E.post("/user/login",t),{code:n,message:i,data:r}=e.data;n===200?(localStorage.setItem("token",r.token),localStorage.setItem("user",JSON.stringify(r.userInfo)),g.success(i||"登录成功"),v.push("/")):g.error(i||"登录失败")}catch(e){const n=e.response?.data?.message||"登录失败，请稍后重试";g.error(n)}finally{d.value=!1}}})};return(p,e)=>{const n=l("el-icon"),i=l("el-input"),r=l("el-form-item"),x=l("el-button"),b=l("el-link"),k=l("el-form");return z(),I("div",F,[a("div",L,[a("div",M,[s(n,{size:"40"},{default:o(()=>[s(f(S))]),_:1}),e[3]||(e[3]=a("h2",null,"摄友圈社区",-1)),e[4]||(e[4]=a("p",null,"欢迎回来，请登录您的账号",-1))]),s(k,{ref_key:"loginFormRef",ref:m,model:t,rules:w,class:"login-form",onSubmit:N(y,["prevent"])},{default:o(()=>[s(r,{prop:"username"},{default:o(()=>[s(i,{modelValue:t.username,"onUpdate:modelValue":e[0]||(e[0]=u=>t.username=u),placeholder:"用户名","prefix-icon":f(q),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),s(r,{prop:"password"},{default:o(()=>[s(i,{modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=u=>t.password=u),type:"password",placeholder:"密码","prefix-icon":f(B),size:"large","show-password":""},null,8,["modelValue","prefix-icon"])]),_:1}),s(r,null,{default:o(()=>[s(x,{type:"primary",size:"large",loading:d.value,"native-type":"submit",style:{width:"100%"}},{default:o(()=>[...e[5]||(e[5]=[c(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1}),a("div",U,[e[7]||(e[7]=a("span",null,"还没有账号？",-1)),s(b,{type:"primary",onClick:e[2]||(e[2]=u=>p.$router.push("/register"))},{default:o(()=>[...e[6]||(e[6]=[c("立即注册",-1)])]),_:1})])]),_:1},8,["model"])])])}}},J=V($,[["__scopeId","data-v-3b36f64a"]]);export{J as default};
