# 社区帖子403错误修复说明

## 问题描述
点击社区时没有帖子，控制台报错：
```
GET http://localhost:8082/api/v1/post/list?page=1&size=10&keyword= 403 (Forbidden)
```

## 问题原因
后端安全配置中的路径匹配与前端实际请求路径不一致：
- 前端axios配置的baseURL是：`http://localhost:8082/api/v1`
- 前端实际请求路径是：`/post/list`（会自动拼接baseURL，变成`/api/v1/post/list`）
- 后端安全配置中匹配的是：`/post/list`（缺少`/api/v1/`前缀）

## 修复方案

### 1. 更新 WebSecurityConfig.java
将所有公开接口的路径匹配从 `/xxx` 改为 `/api/v1/xxx`：

**修改前：**
```java
.requestMatchers(
    AntPathRequestMatcher.antMatcher("/user/register"),
    AntPathRequestMatcher.antMatcher("/user/login"),
    AntPathRequestMatcher.antMatcher("/post/list"),
    // ... 其他接口
).permitAll()
```

**修改后：**
```java
.requestMatchers(
    AntPathRequestMatcher.antMatcher("/api/v1/user/register"),
    AntPathRequestMatcher.antMatcher("/api/v1/user/login"),
    AntPathRequestMatcher.antMatcher("/api/v1/post/list"),
    // ... 其他接口
).permitAll()
```

### 2. 更新 JwtAuthenticationFilter.java
同样更新JWT认证过滤器中的路径匹配：

**修改前：**
```java
return relativePath.startsWith("/user/login") ||
       relativePath.startsWith("/user/register") ||
       relativePath.startsWith("/post/list") ||
       // ... 其他接口
```

**修改后：**
```java
return relativePath.startsWith("/api/v1/user/login") ||
       relativePath.startsWith("/api/v1/user/register") ||
       relativePath.startsWith("/api/v1/post/list") ||
       // ... 其他接口
```

## 修复的文件
1. `摄友圈社区系统/backend/src/main/java/com/shengyouquan/config/WebSecurityConfig.java`
2. `摄友圈社区系统/backend/src/main/java/com/shengyouquan/config/JwtAuthenticationFilter.java`

## 验证步骤
1. 重新编译后端项目：`cd 摄友圈社区系统/backend && mvn clean compile -DskipTests`
2. 重启后端服务
3. 打开前端页面，点击社区标签
4. 检查控制台是否还有403错误
5. 确认帖子列表正常加载

## 影响范围
此修复影响所有公开接口，包括：
- 用户注册/登录
- 作品列表/详情
- 课程列表/详情
- 商品列表/详情
- 帖子列表/详情
- 评论列表
- 积分相关接口
- 交换记录列表
- 文件上传/下载

## 注意事项
- 此修复确保了前后端路径匹配的一致性
- 不影响已登录用户的认证功能
- 不影响需要认证的接口（如创建帖子、点赞等）
